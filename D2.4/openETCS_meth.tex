
\section{Guidelines on the approaches used for OpenETCS}


According to  the WP7 decision meeting, the 4th of July, in Paris, SysML, supported by the Papyrus tool,  has been chosen to  cover the highest level of modelling.

The choice of the approaches for the lower levels of modelling is not yet fixed.

This section gives a proposal on how to use the selected approaches to produce from the input documents (ERA documentation and complements)  to a SIL4 code. this section provides also the common structure and convention for modelling, verification and validation activities whatever was the approaches used: definition of the useful data and naming convention.

\subsection{Sum up of chosen approaches and artifacts}

\subsubsection{System analysis}

\paragraph{Aim}
The objectives of this step is to clarify the scope of the study and to provide a detailed description of the chosen solution to cover the requirements of the main input document of the project  [SRS-Subset 26 v3.3.0].

Thus the task of this step  is:
\begin{itemize}
\item to define the scope of the model (more or less the OBU kernel);
\item to provide an architecture for this model (functional and SW);
\item to lift ambiguities;
\item to detect errors and inconsistencies.
\end{itemize}


\paragraph{Input artifacts}

The input documents and elements of this activities are also inputs of the project as this is the first activities.
\begin{itemize}
\item SRS Subset 26 v3.3.0 is the reference document and can be view as a user need document.
\item All the documents provided by ERA according to the directive [CCS TSI ] available \url{http://www.era.europa.eu/Core-Activities/ERTMS/Pages/Set-of-specifications-2.aspx}.
\item Experience of the railway operators partners
\item Experience of the railway manufacturers partners
\item National and Operation Rules of the Operator
\end{itemize}

\paragraph{Output artifacts}

The output shall provide a clear view of the system to design and will be composed of:

\begin{itemize}
\item a set of informal descriptions (scope of the process, description of the functions, behaviour of the system, ...)
\item  an API to  describe the environment of the system to design, its interfaces and its dynamic implementation
\item a functional architecture which identifies the functions to design and the interaction between these functions and with the environment
\item a data dictionary with description of the input and output variables of the system and all the internal variables needed to  describe the system and the interactions between the functions
\item all the requirements, allocated to function or data description, in natural language. The requirements from the SRS can be possibly split and rewritten in order to restrict their scope to the functions or to match the objects of the data dictionary. New requirements can be defined to describe specification choices or to clarify the behaviour of a function (for example according to the experience from a partner). Traceability issue is mandatory and shall be taken into account early.

\end{itemize}

\paragraph{Means}

The first element needed is a way to manage and organize informal descriptions (including text, pictures, tables,...). 

Functional architecture can be easily defined with BDD and IBD diagrams (see \ref{section:sysml}).
Data dictionary  and requirement set shall be tool supported in order to link they contents to the functional architecture and to  be reused during the modelling, verification, validation and safety activities.

As functional architecture, data dictionary and set of requirement shall be linked together, and shall be defined to be used during all the project. Thus section \ref{sec:datamodel} give some specification of the items to defeine and some naming convention.

\subsubsection{Architectural modelling}


\begin{comment}
First decision proposed to use the SCADE approach for this activity.

Description to provide.
\end{comment}


\subsubsection{Functional and behavioural modelling}


\begin{comment}
First decision proposed to use the SCADE approach for this activity.

Description to provide.
\end{comment}


\subsubsection{Executable software}


\begin{comment}
First decision proposed to use the C language for this activity.

Description to provide.
\end{comment}



\subsection{Data Model}
\label{sec:datamodel}

This section describes all the data shared by the different activities during the project.
These data shall be managed in a common repository which shall be the reference for specification, modelling and VnV activities.

Thanks to the choice of Eclipse platform, use of technologies available on Eclipse and XML files are the best candidates to stores these items.

In the following, we give the specification of these items and the links between them. The specification of this data-model is based on an Ecore model.

3 groups of data are defined: \emph{Variable}, \emph{Function} and \emph{Requirement}; for each group, a set of \emph{attributes} are defined to specify the group. These attributes are specified by a name, a cardinality and a type which can be a well  know type  (as boolean, string, integer,...) or a type defined explicitly for this model.
Finally the links between the group are specified.


\subsubsection{Common attributes}

All the items have common attributes


\begin{figure}[ht]
  \centering
  \includegraphics{DataModel/Common1.png}
  \caption{Common attributes for all items}
  \label{fig:Common}
\end{figure}

\subsubsection{Types}

First of all we have to define the types used to specify the attributes of the data.

\begin{figure}[ht]
  \centering
  \includegraphics{DataModel/Type1.png}
  \caption{Type definition}
  \label{fig:Type}
\end{figure}

In order of possible, we shall use simple and well defined, as boolean, string, integer,... (see the Iso standard for C language \url{http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf}). 5in the Ecore model these types appeared with the prefix "E").

Besides some new types can be define to define a complex or structured type or an enumeration.

For the project the following types have to be defined:

\begin{tabular}{|l | l | l | }
\hline
Name & Category & Description \\
\hline
T\_SourceDocument & Enumeration & Set of source document for defining a data, this can be an \\
& & input document (SRS, a subset,...) or a document provided \\
& & during the process (system analysis, model description,...) \\
\hline
T\_Variable & Complex & All the possible types to define a variable: \\
& & simple types (as boolean, String,...)  \\
& & enumerative types (as ETCS modes or level) \\
& & structured types (as a position of a Train,..) \\
\hline
T\_Definition & Structured & A definition contains at least a textual description (string)  \\
but can also contains a table, a picture, a graphic \\
\hline
T\_RequirementNature & Enumeration & what describe the requirement ? \\
& & Structural, Functional or Definition\\
\hline
T\_System & Enumeration & On what subsystem is allocated the data ? \\
& & Kernel, DMI, BIU,...\\
\hline
\end{tabular}


\subsubsection{Variables}


\begin{figure}[ht]
  \centering
  \includegraphics{DataModel/Variable1.png}
  \caption{Variable definition}
  \label{fig:variable}
\end{figure}

\subsubsection{Functions}


\begin{figure}[ht]
  \centering
  \includegraphics{DataModel/Function1.png}
  \caption{Function definition}
  \label{fig:function}
\end{figure}

\subsubsection{Requirements}


\begin{figure}[ht]
  \centering
  \includegraphics{DataModel/Requirement1.png}
  \caption{Requirement definition}
  \label{fig:requirement}
\end{figure}


\subsubsection{Feature}


\begin{figure}[ht]
  \centering
  \includegraphics{DataModel/Feature1.png}
  \caption{Feature definition}
  \label{fig:feature}
\end{figure}

\subsubsection{Links}


\begin{figure}[ht]
  \centering
  \includegraphics[width=\textwidth]{DataModel/datadictionary.png}
  \caption{General Ecore model of the data dictionnary}
  \label{fig:links}
\end{figure}

\subsection{Name convention}


\subsubsection{Variable naming convention}

\begin{comment}
How to name object ? base : subset 26 ยง7.3.2:
" 7.3.2.11 All Variables have one of the following prefixes:
\begin{itemize}
\item A\_ Acceleration
\item D\_ distance
\item G\_ Gradient
\item L\_ length
\item M\_ Miscellaneous
\item N\_ Number
\item NC\_ class number
\item NID\_ identity number
\item Q\_ Qualifier
\item T\_ time/date
\item V\_ Speed
\item X\_ Text
\end{itemize}


\end{comment}


\begin{comment}
Case sensitive language, keywords of target language (SysML, B, C, Scade 5?),...), UPPER case for names issued form official document (SRS, API,...), lower case for others. length of the name

QA plan to check.
\end{comment}


\subsubsection{Function naming convention}


\begin{comment}
TODO: Marc Behrens
\end{comment}

\subsubsection{Requirement naming convention}


\begin{comment}
TODO: Marc Behrens
\end{comment}

